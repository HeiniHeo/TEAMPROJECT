<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="/user/join_success" method="post" id="join_form">
        <div class="join_popup_wrap"></div>
          <div class="join_popup">
            <ul class="join_pop_inner">
                <li>ID   <input type="text" id="userid" class="join_box" name="userid"></li>
                <li>   <input type="text" id="userid_msg" class="join_box"></li>
                <li>PASSWORD   <input type="password" id="userpw" class="join_box" name="userpw"></li>
                <li>PASSWORD CHECK   <input type="password" id="userpw_check" class="join_box" name="userpw_check"></li>
                <li>E-MAIL   <input type="email" class="join_box" name="user_mail"></li>
                <li>IMAGE  <input type="file" class="join_box" name="userimage"></li> 
                <li>NAME  <input type="text" class="join_box" name="username"></li> 
            </ul>
            <input type="submit" class="joinNow" value="JOIN">
            <span class="close close_join"> X </span>
        </div>
      </form>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script type="text/javascript">

        const pwd1 = document.querySelector('#userpw');
        const pwd2 = document.querySelector('#userpw_check');
        const btn = document.querySelector('.joinNow');
        const login_frm = document.querySelector('#login_form');
        const userid_msg = document.querySelector('#userid_msg');
        const userid = document.querySelector('#userid');
    
        
        function userid_check(){
            let data = axios.get(`http://localhost:3000/user/userid_check?userid=${userid.value}`)
            console.log(data);

            login_flag = data.data.login;

            if(login_flag){
                userid_msg.innerHTML = "You can use this ID"
                userid_msg.style.color = 'blue';
            }else {
                user_msg.innerHTML = "This ID already exeist"
                userid_msg.style.color = 'red';
            }
        }

        userid.addEventListener('focusout',userid_check);


    </script>

</body>
</html>